<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>TV Antrian - Numpang Ngopi.crb</title>
  <style>
    body {
      background-color: #1d899b;
      color: #ffffff;
      font-family: 'Segoe UI', sans-serif;
      text-align: center;
      padding: 30px;
      overflow: hidden;
    }

    h1 {
      font-size: 48px;
      margin-bottom: 10px;
    }

    .marquee {
      width: 100%;
      white-space: nowrap;
      overflow: hidden;
      box-sizing: border-box;
      margin: 10px 0 30px 0;
    }

    .marquee span {
      display: inline-block;
      padding-left: 100%;
      animation: marquee 35s linear infinite;
      font-size: 22px;
      color: #fff8dc;
    }

    @keyframes marquee {
      0% { transform: translateX(0); }
      100% { transform: translateX(-100%); }
    }

    h2 {
      font-size: 36px;
      margin-top: 30px;
      margin-bottom: 10px;
    }

    .nomor {
      font-size: 120px;
      font-weight: bold;
      margin: 20px 0;
      animation: fadeInScale 0.5s ease-in-out;
    }

    @keyframes fadeInScale {
      0% {
        opacity: 0;
        transform: scale(0.6);
      }
      100% {
        opacity: 1;
        transform: scale(1);
      }
    }

    .sisa {
      font-size: 28px;
      margin-top: -10px;
    }

    .jam {
      font-size: 26px;
      margin-top: 40px;
    }
  </style>
</head>
<body>
  <h1>ANTRIAN NUMPANG NGOPI.CRB</h1>

  <div class="marquee">
    <span>
      ‚òïÔ∏è Selamat Nongkrong di Numpang Ngopi.Crb ‚Äî Tempat Rasa Jadi Cerita! &nbsp; üéâ Antrian santai, kopi nikmat. Sabar ya, bro-sis! &nbsp; üì¢ Mokachino & Kopi Aren jadi andalan, udah coba belum? &nbsp; üí¨ Satu teguk, satu tawa, penuh makna! &nbsp; üì∏ Tag kami di Instagram @numpangngopi.crb, biar makin hits! &nbsp; üî• Santai dulu, antrian jalan terus. Nongkrong sambil ngopi yesss! &nbsp; üçÉ Ngopi bukan cuma soal rasa, tapi juga suasana. &nbsp; üé∂ Musik enak, kopi mantap, tongkrongan jalan terus! &nbsp; üí° Tips hari ini: Jangan buru-buru. Nikmati aja suasananya! &nbsp; üï∞Ô∏è Buka dari jam 18.00 s/d 22.30 WIB ‚Äì Jangan telat ya!
    </span>
  </div>

  <h2>Antrian yang Dilayani</h2>
  <div class="nomor" id="antrianSaatIni">-</div>

  <h2>Antrian Berikutnya</h2>
  <div class="nomor" id="antrianSelanjutnya">-</div>
  <div class="sisa" id="sisaAntrian">Sisa Antrian: -</div>

  <div class="jam" id="jamTanggal"></div>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
  <script>
    const firebaseConfig = {
      databaseURL: "https://antrian-kedai-default-rtdb.asia-southeast1.firebasedatabase.app/"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    const currentEl = document.getElementById("antrianSaatIni");
    const nextEl = document.getElementById("antrianSelanjutnya");
    const sisaEl = document.getElementById("sisaAntrian");

    db.ref("antrian/saatIni").on("value", (snap) => {
      const val = snap.val() || "-";
      currentEl.textContent = val;
      currentEl.classList.remove("nomor");
      void currentEl.offsetWidth; // force reflow
      currentEl.classList.add("nomor");
    });

    db.ref("antrian/queue").on("value", (snap) => {
      const data = snap.val();
      if (data) {
        const queue = Object.values(data);
        if (queue.length > 0) {
          nextEl.textContent = queue[0].nomor;
        } else {
          nextEl.textContent = "-";
        }
        sisaEl.textContent = `Sisa Antrian: ${queue.length} lagi`;
      } else {
        nextEl.textContent = "-";
        sisaEl.textContent = "Sisa Antrian: 0";
      }
    });

    function updateTime() {
      const now = new Date();
      const jam = now.toLocaleTimeString('id-ID');
      const tanggal = now.toLocaleDateString('id-ID', {
        weekday: 'long', year: 'numeric', month: 'long', day: 'numeric'
      });
      document.getElementById("jamTanggal").textContent = `${tanggal} | ${jam}`;
    }

    setInterval(updateTime, 1000);
    updateTime();
  </script>
</body>
</html>
